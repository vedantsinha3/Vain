<script>
    function handleCredentialResponse(response) {
        // Send the ID token to your server for verification
        const idToken = response.credential;
        console.log("ID Token:", idToken);

        // Send the token to your backend for verification
        fetch('/verify-google-token', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ token: idToken }),
        })
        .then(response => response.json())
        .then(data => {
            console.log("User authenticated:", data);
            // Redirect or update UI based on the response
        })
        .catch(error => {
            console.error("Error:", error);
        });
    }

    // Add the callback to the Google Sign-In button
    window.onload = function () {
        google.accounts.id.initialize({
            client_id: 'YOUR_GOOGLE_CLIENT_ID',
            callback: handleCredentialResponse,
        });
    };
</script>